import React, { useState } from 'react';
import { Nav, Tab, Row, Col, Card } from 'react-bootstrap';

const getColor = (time, category) => {
    const colors = {
        critical: {
            '>91 days': '#e31a1a',
            '61-90 days': '#E31A1ACC',
            '31-60 days': '#E31A1A99',
            '<30 days': '#E31A1A66',
        },
        high: {
            '>91 days': '#F9AE1A',
            '61-90 days': '#F9AE1ACC',
            '31-60 days': '#F9AE1A99',
            '<30 days': '#F9AE1A66',
        },
        medium: {
            '>91 days': '#FFD60A',
            '61-90 days': '#FFD60ACC',
            '31-60 days': '#FDD94599',
            '<30 days': '#FFD60A66',
        },
        low: {
            '>91 days': '#8ECF56',
            '61-90 days': '#8ECF56CC',
            '31-60 days': '#8ECF5699',
            '<30 days': '#8ECF5699',
        },
    };
    return colors[category][time];
};

const VulnerabilityAgeMatrix = ({ values }) => {
    const [activeTab, setActiveTab] = useState('Published Date');

    return (
        <div className="container mt-4">
            <Tab.Container activeKey={activeTab} onSelect={(k) => setActiveTab(k)}>
                <Nav variant="tabs" className="mb-3">
                    <Nav.Item>
                        <Nav.Link eventKey="Published Date">Published </Nav.Link>
                    </Nav.Item>
                    <Nav.Item>
                        <Nav.Link eventKey="Discovered Date">Discovered </Nav.Link>
                    </Nav.Item>
                </Nav>
                <Tab.Content className="m-t-50">
                    {['Published Date', 'Discovered Date']?.map((tabKey) => (
                        <Tab.Pane key={tabKey} eventKey={tabKey}>
                            <Row className="fw-bold align-items-center my-2 gap-2">
                                <Col xs={2} className="matrix-color"></Col>
                                <Col xs={2} className="p-l-0 p-r-0 text-center">
                                    Critical
                                </Col>
                                <Col xs={2} className="p-l-0 p-r-0 text-center">
                                    High
                                </Col>
                                <Col xs={2} className="p-l-0 p-r-0 text-center">
                                    Medium
                                </Col>
                                <Col xs={2} className="p-l-0 p-r-0 text-center">
                                    Low
                                </Col>
                            </Row>
                            {(tabKey === 'Published Date'
                                ? values?.publish_date_age_matrix
                                : values?.discovered_date_age_matrix
                            )?.map((row, index) => (
                                <Row
                                    key={index}
                                    className="align-items-center text-center my-2 gap-2">
                                    <Col xs={2} className="matrix-color">
                                        {row.time}
                                    </Col>
                                    {['critical', 'high', 'medium', 'low']?.map((category) => (
                                        <Col key={category} xs={2} className="matrix-color">
                                            <Card
                                                className="text-white text-center py-2"
                                                style={{
                                                    backgroundColor: getColor(row?.time, category),
                                                }}>
                                                <Card.Body>{row[category]}</Card.Body>
                                            </Card>
                                        </Col>
                                    ))}
                                </Row>
                            ))}
                        </Tab.Pane>
                    ))}
                </Tab.Content>
            </Tab.Container>
        </div>
    );
};

export default VulnerabilityAgeMatrix;
